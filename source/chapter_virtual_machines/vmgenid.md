# 10.6虚拟机生成ID

Proxmox VE支持虚拟机生成ID（vmgenid）功能。虚拟机操作系统可利用该功能检测操作系统时间漂移事件，比如备份恢复虚拟机或快照回滚等。

在新建虚拟机时，会自动生成vmgenid并写入虚拟机配置文件。

对于已有虚拟机，如果要新增vmgenid，可以向虚拟机传递特殊值‘1’，Proxmox VE就会自动创建。也可以手工指定UUID为vmgenid值。示例

如下：

```
qm set VMID -vmgenid 1
qm set VMID -vmgenid 00000000-0000-0000-0000-000000000000
```

- 注意
 - 首次向已有虚拟机添加vmgenid时，虚拟机有可能将该操作理解为生成值改变，从而做出类似对快照回滚或备份恢复的响应。

如果确实有特殊原因，不希望启用vmgenid，可以在创建虚拟机时设置值‘0’，或者在创建虚拟机后再执行删除该特性的命令，如下：

```
qm set VMID -delete vmgenid
```

微软Windows操作系统是使用vmgenid的典型场景，能通过该特性有效避免快照回滚，备份恢复或虚拟机克隆时导致时间敏感服务（例如，数据库，域控制器）异常。
