# 15.10软件包升级

升级ha-manager时，你应该一个节点一个节点的进行。出于多种原因，永远不要同时升级所有节点。首先，尽管我们会彻底测试Proxmox VE，但不能确保消除一切bug，特别在你个性化的安装环境中。逐个节点进行升级，并在升级后检查每个节点的运行情况有助于在发生意外时恢复集群。同时升级所有节点可能导致集群崩溃，并非最佳实践。

此外，Proxmox VE的HA组件在集群节点和本地资源管理器之间采用了请求确认协议来传递命令。在重启时，LRM将向CRM发出请求，冻结其所有服务。这将防止LRM重启时避免相关资源被集群访问。这样LRM就可以在重启时安全地关闭看门狗。LRM重启通常发生在软件升级时，当前的主CRM 需要确认LRM的请求，如果不这样做，升级过程持续的时间可能过长，并可能触发看门狗重启服务器。